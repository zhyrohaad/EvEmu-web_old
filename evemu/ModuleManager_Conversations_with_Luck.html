<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.evemu.org/index.php/ModuleManager_Conversations_with_Luck by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 04 Aug 2015 15:59:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>ModuleManager Conversations with Luck - EVEmu Wiki</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.19.1" />
<link rel="shortcut icon" href="http://wiki.evemu.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.evemu.org/opensearch_desc.php" title="EVEmu Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.evemu.org/api.php?action=rsd" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
<link rel="alternate" type="application/atom+xml" title="EVEmu Wiki Atom feed" href="http://wiki.evemu.org/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://wiki.evemu.org/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.vector&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}a.new,#quickbar a.new{color:#ba0000}

/* cache key: evemu_wiki-pubwiki_:resourceloader:filter:minify-css:7:c88e2bcd56513749bec09a7e29cb3ffa */
</style>

<script src="http://wiki.evemu.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"ModuleManager_Conversations_with_Luck","wgTitle":"ModuleManager Conversations with Luck","wgCurRevisionId":116,"wgArticleId":60,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgRelevantPageName":"ModuleManager_Conversations_with_Luck","wgRestrictionEdit":[],"wgRestrictionMove":[],"wgVectorEnabledModules":{"collapsiblenav":true,"collapsibletabs":true,"editwarning":false,"expandablesearch":false,"footercleanup":false,"sectioneditlinks":false,"simplesearch":true,"experiments":true},"wgWikiEditorEnabledModules":{"toolbar":false,"dialogs":false,"hidesig":true,"templateEditor":false,"templates":false,"preview":false,"previewDialog":false,"publish":false,"toc":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,
"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"vector-simplesearch":1,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;},{},{});mw.loader.implement("user.tokens",function($){mw.user.tokens.set({"editToken":"+\\","watchToken":false});;},{},{});

/* cache key: evemu_wiki-pubwiki_:resourceloader:filter:minify-js:7:66a938cc0955964f33213004042d63fb */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-ModuleManager_Conversations_with_Luck skin-vector action-view">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content" class="mw-body">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading">
				<span dir="auto">ModuleManager Conversations with Luck</span>
			</h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
								<!-- tagline -->
				<div id="siteSub">From EVEmu Wiki</div>
				<!-- /tagline -->
								<!-- subtitle -->
				<div id="contentSub"></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav" class="mw-jump">
					Jump to: <a href="#mw-head">navigation</a>,
					<a href="#p-search">search</a>
				</div>
				<!-- /jumpto -->
								<!-- bodycontent -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>Conversations with Luck on Module Manager design:
</p>
<h1> <span class="mw-headline" id="PART_I"> PART I </span></h1>
<pre>11:15	Aknor|working	ah, so we need to supply a crateID
11:15	Aknor|working	so, we do not use item-&gt;Move()
11:15	Almamu	yes
11:15	Aknor|working	it is insufficient
11:15	Aknor|working	we need to make a new function for contracts that handles this stuff
11:15	Aknor|working	hmmmm
11:15	Almamu	the problem is, how can i create a "crate" and what type is it&#160;?
11:15	Almamu	hmmmm
11:16	Almamu	wait a sec, i will search in the db for something related
11:16	Aknor|working	it's an object... it's not a game object
11:17	Aknor|working	something behind the scenes
11:17	Aknor|working	it is not in invTypes
11:17	Aknor|working	its not like a ship or cargo container
11:17	Aknor|working	they do the same thing for trades
11:17	Aknor|working	there is a tradeContainerID i think
11:17	Aknor|working	this is gonna take us some work to make this work right
11:18	Almamu	the stations are like "items" at the entity table, why not handle crates like them&#160;?
11:18	Aknor|working	well.... since i haven't seen the whole progression of packets from the start of creating one, adding items to it, and then finishing it... i'm not sure what to do at this point
11:19	Aknor|working	well, yeah, we can... put "crates" in the entity table
11:19	Almamu	and the items can have locationID = crateID
11:19	Aknor|working	and then they have their own ID, so we have a crateID, then we change locationID for all items in the contract to that crateID
11:19	Almamu	so i can delete one more table from the DB( contract_items )
11:19	Aknor|working	but, there is way more... we need to send that packet instead of that OnItemChange packet that gets sent when you do Move()
11:19	Aknor|working	i would say so... did you add that?
11:19	Almamu	maybe its cause the new client
11:20	Almamu	let me search for OnItemChange
11:20	Almamu	on the capture
11:20		*** Code_Red joined #evemu
11:20		+++ ChanServ has given op to Code_Red
11:20	Aknor|working	i have no idea if its because of the new client... i've never seen packet logs of contracts stuff for apoc, so... idk
11:20	Aknor|working	o/ Code_Red
11:20	Code_Red	\o
11:20	Almamu	hey!
11:20	Almamu	ok, OnItemChange is not in the packet
11:20	Almamu	so it will be cause the client version
11:21	Almamu	or something
11:21	Code_Red	so whats new
11:21	Almamu	trying to work in contracts system
11:21	Almamu	*on
11:21	Code_Red	kewl
11:21	Aknor|working	yeah... this is getting pretty complicated, Almamu
11:22	Almamu	yeah, i know
11:22	Aknor|working	we still need a contract class, contract manager class
11:22	Almamu	and maybe some caching for them too
11:23	Almamu	if the contract list is too big it will take a while for the server to fetch it -.-"
11:23	Aknor|working	and then when you make a contract, it makes a new contract class object, makes a new contractID, a new crateID, then when you start adding things to the contract, the right stuff happens, moves items to that container from your station items, then sends that right packet to the client with the new crateID and contractID
11:23	Aknor|working	yeah
11:23	Aknor|working	um, dont worry about caching...
11:23	Aknor|working	why caching?
11:24	Aknor|working	oh, i see why... right
11:24	Aknor|working	but we dont have that now, so dont worry about it
11:24	Almamu	ok
11:24	Aknor|working	we dont have caching of the market either, but it is also very inefficient packing the sql query, so, that's not of our concern right now
11:25	Aknor|working	this is educational, not like we're trying to make a server that serves 100's or 1000's or more... c'mon
11:25	Aknor|working	we'll make a cache later to learn about cache systems and stuff
11:25	Almamu	thats what i was trying to talk about
11:25	Aknor|working	ok
11:26	Aknor|working	man.... we have some bubble/warping issues... we have contract work going on.... we need to work on module manager....
11:26	Almamu	-.-"
11:27	Almamu	the next time i will try to fix something that is already here
11:27	Almamu	xD
11:27	Aknor|working	hmm... well, i gotta fix the warping/bubble stuff first, then decide whether to work on module manager or help you with contracts
11:27	Aknor|working	hahaha
11:27	Aknor|working	yeah
11:27	Almamu	module manager would be better
11:27	Aknor|working	well, it will take longer than contracts i bet
11:27	Almamu	woking on*
11:27	Aknor|working	contracts might only be a couple weeks
11:28	Aknor|working	and luck and captnoord are kinda inactive right now, even though luck has popped back in
11:28	Aknor|working	i really dont wanna work on the MM without both of them
11:28	Almamu	xD
11:29	Aknor|working	sooooo..... let's do contracts, and then let's take a look at private trades
11:29		*** Luck joined #evemu
11:29		+++ ChanServ has given op to Luck
11:29	Aknor|working	O.O
11:29	Luck	oh hi
11:29	Almamu	hey!
11:29	Aknor|working	Code_Red, stop fooling around
11:29	Luck	lol
11:29	Almamu	xDDDD
11:29	Code_Red	hiya luck
11:29	Aknor|working	right.....
11:29	Luck	hey man
11:29	Luck	quick question aknor
11:30	Luck	you did your attribute patch against 1049 right?
11:30	Aknor|working	ok, "Luck", what chemicals did you mention to me the other night?
11:30	Luck	hf and h2so4
11:30	Code_Red	he thinks your me kev LOLOLOL
11:30	Luck	:p
11:30		Aknor|working hears ChanServ announce "Luck Identity Confirmed"
11:30	Code_Red	noob manuver
11:30	Aknor|working	ok
11:30	Luck	lol
11:30	Luck	anyways
11:30	Luck	you did your patch against 1049 right?
11:30	Aknor|working	dude, there's been soooooo many impersonators of Luck in here....
11:30	Aknor|working	ok, yeah
11:31	Luck	hmm
11:31	Aknor|working	trying to remember what that was... Celestial stuff?
11:31	Luck	the attribute merge
11:31	Code_Red	i haven't impersonated luck ever
11:31	Aknor|working	wait... what patch?
11:31	Luck	<a rel="nofollow" class="external free" href="http://forum.evemu.org/viewtopic.php?f=8&amp;t=507">http://forum.evemu.org/viewtopic.php?f=8&amp;t=507</a>
11:31	Aknor|working	attribute merge is already committed
11:31	Luck	ah
11:31	Luck	i didn't see that it was committed
11:31	Luck	my fault
11:31	Luck	that would explain a lot
11:32	Luck	:p
11:32	Aknor|working	HAHAHAHAHAHA
11:32	Aknor|working	ok, i see i said r1049, but we're on r1078 now
11:32	Luck	yea
11:32	Luck	that's why i was a little confused
11:32	Aknor|working	and it pretty much works dude!
11:32	Luck	it was also 4 am
11:32	Aknor|working	LMAO
11:32	Luck	so that might have had something to do with it too
11:32		Code_Red continues his minecraft
11:32	Luck	:)
11:32	Luck	okay then
11:32	Aknor|working	i was sleeping in my computer chair at 4am
11:32	Aknor|working	&gt;_&gt;
11:33	Almamu	O.o
11:33	Luck	so i can just checkout and program for the mm then
11:33	Luck	cool
11:33	Luck	makes my life easier
11:33	Aknor|working	yep
11:33	Aknor|working	OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
11:33	Aknor|working	he said MM&#160;!!!!
11:33	Luck	yes i did
11:33	Almamu	lol
11:33	Aknor|working	HE SAID MM&#160;!!!!!!!!
11:33	Luck	:)
11:33	Luck	no promises
11:33	Almamu	aknor, youre crazy!
11:33	Almamu	xD
11:33	Aknor|working	so, you have a newer version than what's in SVN now?
11:33	Aknor|working	cuz i re-enabled some stuff that captnoord had disabled in his attribute branch
11:34	Aknor|working	just to try stuff out
11:34	Luck	not that will work with the new attribute system
11:34	Aknor|working	this morning, i fitted a microwarpdrive and a pulse laser and a cloaking device to an Ashimmu and undocked
11:34	Luck	i'm probably just gonna start from scratch
11:34	Luck	nice
11:34	Aknor|working	i got a couple exceptions from the client when i fitted the laser
11:34	Aknor|working	the ship did not disappear after undocking
11:34	Luck	did your ship go invisible?
11:34	Luck	really?
11:34	Aknor|working	however, it DID disappear when i re-docked
11:34	Aknor|working	XD
11:34	Luck	ah
11:34	Aknor|working	you'll see the client exceptions
11:34	Almamu	xD
11:34	Aknor|working	one was about turrets
11:35	Luck	yea
11:35	Luck	yep
11:35	Luck	that's the old one
11:35		Code_Red hates creepers
11:35	Aknor|working	see, i can help code up features on the server side, but i really have ZERO clue what kinds of packets and info need to go back to the clients when stuff gets changed on the fitting or module usage
11:35	Aknor|working	oh ok
11:37	Luck	yea
11:37	Luck	there's some update that needs to be sent to the client
11:37	Luck	to tell it to update the render of the ship
11:37	Luck	but it's not being sent
11:37	Luck	so it stops rendering the ship
11:37	Luck	at least that's what I think happenes
11:37	Luck	*happens
11:38	Aknor|working	ok... well, i've been thinking about the client, mm, ship, modules OOD....
11:38	Luck	:)
11:38		Code_Red bobs head in TS
11:38	Aknor|working	it makes sense now that the MM is owned by the client, not the ship
11:38	Aknor|working	but the MM should have a direct reference to whatever ship it is "managing"
11:38		*** Code_Red is now known as Code_Red|TS3
11:38	Luck	cool
11:39	Luck	that was what I was thinking
11:39	Aknor|working	but the ship owns the modules, not the module manager
11:39	Aknor|working	the module manager needs access to them but does not own them
11:39	Luck	yea
11:39	Aknor|working	the existing MM i've seen has its own containers for modules
11:40	Luck	yea
11:40	Aknor|working	actually, i've been thinking we'd want std::map&lt;&gt; not std::vector&lt;&gt; containers, and separate ones for low, medium, high, rig, and subsystems
11:40	Luck	so we need to rewrite ship, and the mm
11:40	Luck	yea
11:40	Luck	probably a good idea
11:40	Luck	separating them makes sense
11:40	Aknor|working	so, we should put those containers into the Ship class then provide functions on the Ship class that fit/unfit modules
11:41	Luck	yea
11:41	Aknor|working	and also Get module references so we can then Activate, Deactivate, Reload/Unload charges
11:41	Aknor|working	see, each module should also be an object
11:41	Luck	i feel like the fit/unfit should go though the mm
11:41	Aknor|working	ShipModule base class
11:41	Aknor|working	then derive ActiveModule and PassiveModule and SubsystemModule
11:42	Luck	yea
11:42	Aknor|working	then derive ArmorRepairerModule from ActiveModule, HullUpgradeModule from PassiveModule
11:42	Luck	yea
11:43	Aknor|working	they inherit proper routines like Activate() or Deactivate() that would only come from ActiveModule, but not from PassiveModule
11:43	Aknor|working	Subsystems are more complicated because they actually modify the slot configuration
11:43	Aknor|working	THAT should be managed INSIDE the ship object
11:43	Aknor|working	this is too funny... i'm making a lot of sense now and all this is just coalescing right now, actually XD
11:43	Luck	yea
11:43	Luck	probably
11:43	Luck	:)
11:44	Aknor|working	:D
11:44	Mobbel	hey luck
11:44	Luck	so which part do you want to write?
11:44	Luck	:p
11:44	Aknor|working	hmm....
11:44	Luck	hey mobbel
11:44	Mobbel	how are you???
11:44	Luck	pretty good man
11:44	Aknor|working	how about i start modifying the Ship class to contain the module containers
11:44	Luck	done with school for the semester
11:44	Luck	taking a break
11:44	Luck	kk
11:45	Luck	i will look at reworking the mm class
11:45	Aknor|working	ok
11:45	Aknor|working	i think we need a separate Modules.h/.cpp file set
11:45	Aknor|working	to pull ShipModule and other stuff OUT of ModuleManager.h/.cpp
11:46	Aknor|working	ok, and i'll pull a lot of stuff out of ShipModule and make that the abstract base class
11:46	Luck	kk
11:46	Aknor|working	and start deriving the different module child classes off that
11:46	Luck	i'm basically trashing the mm as it exists in 1078
11:46	Aknor|working	HAHA, ok
11:46	Luck	since most of it is redundant/in the wrong place
11:47	Mobbel	looks like luck is back for doing great things&#160;:D
11:48	Aknor|working	ok, so here's my list:
11:48	Aknor|working	1) expand Ship class to contain module containers, module reference Get(module_slot_flag), FitModule(), UnfitModule(), RigInstall(), RigRemove(), SubSystemInstall(), SubSystemRemove()
11:48	Aknor|working	i'll leave those mostly empty for now
11:49	Aknor|working	2) move ShipModule into Modules.h/.cpp, clean it out, make it abstract, and start deriving child classes for the various specific modules we need
11:49	Luck	yea
11:49	Aknor|working	that will allow us to do polymorphism on ship-&gt;GetModule(slot_flag)-&gt;Activate()
11:50	Luck	atm i have an empty ShipModule class and an empty ModuleManager class
11:50	Aknor|working	and it will just work
11:50	Aknor|working	:D
11:50	Aknor|working	k
11:50	Luck	yea
11:50	Luck	thank god
11:50	Luck	so lets see
11:50	Luck	the constructor for the module manager
11:50	Luck	should get a reference from the client
11:50	Aknor|working	for the ship, yeah
11:50	Aknor|working	AND the client
11:51	Aknor|working	that's the thing that had me frustrated
11:51	Aknor|working	you reference all the way down to these lower objects and then you need info from one of the higher ones, but there's no reference BACK
11:51	Aknor|working	client-&gt;Destiny()-&gt;GotoDirection() and then you're inside DestinyManager with NO access to the Client object, LOL
11:51	Luck	lol
11:51	Luck	wonderful
11:52	Aknor|working	but, that might be because not all the info needed by DestinyManager() was provided... idk
11:52	Aknor|working	anyway, got a meeting, talk to you chaps later
11:52	Luck	kk
</pre>
<p><br />
</p>
<h1> <span class="mw-headline" id="PART_II"> PART II </span></h1>
<pre>[13:47] &lt;+Luck&gt; okay aknor
[13:47] &lt;+Luck&gt; so
[13:47] &lt;+Luck&gt; base classes
[13:47] &lt;+Luck&gt; module, subsystem
[13:48] &lt;+Luck&gt; h/o
[13:48] &lt;+Luck&gt; im gonna draw it up
[13:48] &lt;+Luck&gt; i have to to get it in my head&#160;:p
[13:48] &lt;+Aknor&gt; oh hey
[13:48] &lt;+Luck&gt; figured we could talk in here
[13:49] &lt;+Luck&gt; since it will be less busy or w/e
[13:57] &lt;+Nick&gt; r1079 on linux x64 doesn't build Aknor
[13:57] &lt;+Aknor&gt; heh, "less" busy... but, i cant talk much anymore for a while.. .got stuff to do
[13:57] &lt;+Nick&gt; <a rel="nofollow" class="external free" href="http://pastebin.com/LT5zbkHm">http://pastebin.com/LT5zbkHm</a>
[13:57] &lt;+Aknor&gt; i'll be back tonight i think
[13:57] &lt;+Luck&gt; kk
[13:57] &lt;+Luck&gt; im gonna work on some of the modules then
[13:57] &lt;+Nick&gt; is the tonight op still in place?
[13:57] &lt;+Aknor&gt; i'm planning on it... we'll see
[13:58] &lt;+Aknor&gt; each time is play by ear
[13:58] &lt;+Nick&gt; it'll be 4 am for me
[13:58] &lt;+Nick&gt; i need to know&#160;:))
[13:58] &lt;+Aknor&gt; haha, you dont have to
[13:58] &lt;+Aknor&gt; just sleep man
[13:58] &lt;+Aknor&gt; idk why evilnumber won't build
[13:58] &lt;+Nick&gt; well if it is on i'll be there
[13:58] &lt;+Aknor&gt; on linux 64
[13:59] &lt;+Aknor&gt; so, luck, before i go, you understand the whole deal with that proposed architecture?
[13:59] &lt;+Luck&gt; yea
[13:59] &lt;+Luck&gt; i believe so
[13:59] &lt;+Aknor&gt; how all the attribute mods are done deep in the module classes themselves
[13:59] &lt;+Luck&gt; yea
[13:59] &lt;+Aknor&gt; keeps everything separate so the "real" knowledge of what effects mod what attributes is hidden in each module group class
[14:00] &lt;+Luck&gt; yea
[14:00] &lt;+Aknor&gt; so, we need to pass a copy of ship attributes down into the module class calls along with the character skills
[14:01] &lt;+Aknor&gt; oh... just realized... how about if the ModuleManager figures out if online/activate/load charge/fit module can even happen BEFORE those functions are called on the actual module classes?
[14:02] &lt;+Luck&gt; yea
[14:02] &lt;+Aknor&gt; then we dont need those ConfirmFitModule etc calls
[14:02] &lt;+Aknor&gt; that seemed ugly to me
[14:02] &lt;+Luck&gt; i wasn't sure where you were going with those anyways
[14:02] &lt;+Luck&gt;&#160;:p
[14:02] &lt;+Aknor&gt; well, i just talked myself back into it again
[14:02] &lt;+Aknor&gt; how does the MM know if a module CAN be onlined?
[14:03] &lt;+Aknor&gt; only the module knows that info
[14:03] &lt;+Aknor&gt; cpu load/power load/capacitor need/ etc
[14:03] &lt;+Aknor&gt; unless we breakout just that stuff up into the MM
[14:03] &lt;+Luck&gt; the mm has access to the ship attributes and the module attributes?
[14:03] &lt;+Luck&gt; or just the ship
[14:03] &lt;+Aknor&gt; the rest, like effect specific mods go on only inside the module class
[14:04] &lt;+Luck&gt; well the mm needs info on the module itself
[14:04] &lt;+Aknor&gt; mmmm
[14:04] &lt;+Luck&gt; so it can check skills and such
[14:04] &lt;+Aknor&gt; well, but the modules themselves know about what skills are needed
[14:04] &lt;+Luck&gt; hmm
[14:04] &lt;+Aknor&gt; so we get a DogmaIMBound::Handle_Activate() call
[14:05] &lt;+Aknor&gt; it calls client-&gt;ModuleManager()-&gt;ActivateModule(moduleID)
[14:06] &lt;+Aknor&gt; which, calls m_shipRef-&gt;GetModule(moduleID)-&gt;Activate(charSkillList, shipAttribList, &amp;externalAction)
[14:06] &lt;+Aknor&gt; hmm
[14:07] &lt;+Aknor&gt; yeah, there seems to be some things that we just cant take out of the MM
[14:07] &lt;+Luck&gt; i feel like the mm should check skills/pg/cpu
[14:07] &lt;+Aknor&gt; i'm trying to find a way to keep the MM from becoming this giant super class that has all knowledge of all things and does all things to every thing
[14:07] &lt;+Aknor&gt; hmmm, sounds like that would be right
[14:08] &lt;+Luck&gt; lol
[14:08] &lt;+Luck&gt; it is going to need access to the character, the ship and the module
[14:08] &lt;+Luck&gt; pretty much any way you do it
[14:08] &lt;+Aknor&gt; right
[14:08] &lt;+Luck&gt; unless each of the modules become superclasses that have like 8 arguments
[14:08] &lt;+Luck&gt;&#160;:p
[14:08] &lt;+Aknor&gt; access to module goes through the new Ship::GetModule(uint32 moduleFlag) that i will write
[14:09] &lt;+Luck&gt; you'll need more than a access by flag
[14:09] &lt;+Aknor&gt; pulls the module from the right container and returns the ShipModuleRef
[14:09] &lt;+Luck&gt; you need access by itemID
[14:09] &lt;+Aknor&gt; nope
[14:09] &lt;+Luck&gt; yes
[14:09] &lt;+Aknor&gt; there is a unique flag for every low slot, medium slot, and high slot, rig slot and subsystem slot, i think
[14:09] &lt;+Luck&gt; the client sends a itemID packet to reference a module
[14:09] &lt;+Luck&gt; when it's activated
[14:09] &lt;+Luck&gt; so there has to be a bridge between the itemID and the module
[14:10] &lt;+Aknor&gt; well...ok, then we just do m_shipRef-&gt;GetModule(moduleItemID), and that returns a ShipModuleRef
[14:10] &lt;+Luck&gt; yea
[14:10] &lt;+Luck&gt; that's fine
[14:10] &lt;+Luck&gt; im just saying that in order to handle the packet we have to have a way to look up by id
[14:10] &lt;+Aknor&gt; that, through polymorphism calls the right specific derived class functions
[14:11] &lt;+Aknor&gt; yeah the other way would have required using the itemID to get the flag and then using the flag in that GetModule() function
[14:11] &lt;+Luck&gt; yea
[14:11] &lt;+Aknor&gt; would work either way because i was planning on making the five std::map&lt;&gt; containers using the flag as the key, not itemID
[14:12] &lt;+Luck&gt; that's fine
[14:12] &lt;+Luck&gt; and probably easier to understand
[14:12] &lt;+Aknor&gt; this is why:  how do you know which itemID of the module adjacent to the one you just overloaded and is causing heat damage to the adjacent modules?
[14:12] &lt;+Aknor&gt; you dont.. all you know is the itemID and flag of the module you just overloaded
[14:13] &lt;+Luck&gt; m_ShipRef-&gt;GetModuleByItemID(itemID)-&gt;GetFlag()
[14:13] &lt;+Aknor&gt; so when the m_ship-&gt;GetModule(moduleItemID)-&gt;Overload() function modifies its externalAction class object
[14:13] &lt;+Luck&gt; hmm
[14:13] &lt;+Luck&gt; overloading is gonna be a bitch
[14:14] &lt;+Aknor&gt; nah
[14:14] &lt;+Aknor&gt; when the externalAction class has overload damage asserted in it, we just apply it to the adjacent modules
[14:15] &lt;+Aknor&gt; using this:  m_shipRef-&gt;GetModule(moduleFlag +/- 1)-&gt;OverloadDamage(blah)
[14:15] &lt;+Aknor&gt; or something like that
[14:15] &lt;+Aknor&gt; so if the only way you can access a module via the Ship::GetModule() function is by 'flag' instead of itemID , then this makes accessing the right slot easier
[14:15] &lt;+Aknor&gt; we can easily get the flag of the module we're working with from the itemID
[14:16] &lt;+Aknor&gt; it just fits... would be more clunky if we had containers for the modules where the keys were itemIDs instead of flags
[14:16] &lt;+Luck&gt; yea
[14:16] &lt;+Aknor&gt; then ya gotta iterate through each module in the container looking for the right flags
[14:17] &lt;+Aknor&gt; in paket_types.h there are flags for every unique slot
[14:17] &lt;+Aknor&gt; so that will work
[14:17] &lt;+Luck&gt; sounds fine to me
[14:17] &lt;+Luck&gt; i was just pointing out that we needed a search by itemID function
[14:17] &lt;+Luck&gt;&#160;:)
[14:17] &lt;+Aknor&gt; we can even have Ship::FitModule(moduleID) that returns 0 or 1 based on whether the slot was occupied
[14:18] &lt;+Aknor&gt; oh.. gotta pass the flag in as well
[14:18] &lt;+Aknor&gt; but, then it's already part of the InventoryItem of that module
[14:18] &lt;+Aknor&gt; hmmm
[14:18] &lt;+Aknor&gt; i've used the GetItem from ItemFactory
[14:18] &lt;+Aknor&gt; but that might be too inefficient
[14:18] &lt;+Aknor&gt; i dont think there is any other way
[14:19] &lt;+Aknor&gt; except query the DB
[14:19] &lt;+Aknor&gt; does this already exist?   m_ShipRef-&gt;GetModuleByItemID(itemID)-&gt;GetFlag()
[14:19] &lt;+Luck&gt; i believe so
[14:21] &lt;+Aknor&gt; nope. nowhere in the source
[14:21] &lt;+Luck&gt; hmm
[14:22] &lt;+Aknor&gt; ItemFactory:    InventoryItemRef GetItem(uint32 itemID);
[14:23] &lt;+Aknor&gt; ItemFactory is a singleton for the entire server
[14:23] &lt;+Luck&gt; lol
[14:23] &lt;+Aknor&gt; it holds a std::map&lt;uint32, InventoryItemRef&gt;
[14:23] &lt;+Aknor&gt; THAT has EVERY item ever created in the entire game universe
[14:23] &lt;+Aknor&gt; and THAT is how ALL items are "found" throughout the server code, so far as i can tell
[14:24] &lt;+Luck&gt; lol
[14:24] &lt;+Aknor&gt; so, InventoryItemRef GetItem(uint32 itemID)  just does m_items.find( itemID )
[14:24] &lt;+Luck&gt; i can see that getting pretty bogged down
[14:24] &lt;+Aknor&gt; m_items is the private std::map&lt;uint32, InventoryItemRef&gt; container
[14:24] &lt;+Aknor&gt; well, i have no idea how to do it better
[14:24] &lt;+Aknor&gt; distributed containers?
[14:24] &lt;+Aknor&gt; idk
[14:25] &lt;+Luck&gt; multi-thred it
[14:25] &lt;+Aknor&gt; yeah
[14:25] &lt;+Luck&gt; more than 1 container
[14:25] &lt;+Aknor&gt; eve-server is single thread single process
[14:25] &lt;+Luck&gt; more memory usage
[14:25] &lt;+Aknor&gt; yeah
[14:25] &lt;+Luck&gt; much faster execution
[14:25] &lt;+Aknor&gt; yeha
[14:25] &lt;+Luck&gt; w/e
[14:25] &lt;+Luck&gt; it's not a big deal now
[14:25] &lt;+Aknor&gt; well, cant fix that now... ha, yeah
[14:25] &lt;+Luck&gt; lol
[14:26] &lt;+Aknor&gt; so... almost every major class has access to the singleton ItemFactory object somehow, so all it does is m_factory-&gt;GetItem(itemID)-&gt;GetFlag()
[14:26] &lt;+Aknor&gt; boom, got the item flag
[14:27] &lt;+Aknor&gt; ah, it's just "flag()" not "GetFlag()"
[14:27] &lt;+Luck&gt;&#160;:)
[14:27] &lt;+Aknor&gt; so, what do you think so far?    Ship class gets some new functions to fit/unfit modules, provide a way to get the pointer to module classes by flag...
[14:28] &lt;+Luck&gt; yep
[14:28] &lt;+Aknor&gt; then the rest is done on the module classes themselves with their methods
[14:28] &lt;+Aknor&gt; all inside the MM
[14:28] &lt;+Luck&gt; do you agree with the mm checking skills?
[14:28] &lt;+Aknor&gt; so, then the MM will check cpu/power grid, right?
[14:28] &lt;+Luck&gt; or do you think that should be done inside the modules themselves
[14:28] &lt;+Aknor&gt; cpu/power grid, definitely
[14:28] &lt;+Luck&gt; what about skills though?
[14:28] &lt;+Aknor&gt; so that leaves skills, right?  nothing else to check?
[14:28] &lt;+Luck&gt; yea
[14:29] &lt;+Luck&gt; pg/cpu/skills
[14:29] &lt;+Luck&gt; oh
[14:29] &lt;+Aknor&gt; ok, so what skills and check them for what exactly?
[14:29] &lt;+Luck&gt; actually
[14:29] &lt;+Luck&gt; it has to check certain ship attributes as well
[14:29] &lt;+Aknor&gt; hmmm, well
[14:29] &lt;+Luck&gt; i did some of this in the old mm
[14:29] &lt;+Luck&gt; basically it has to check spaceship command skills
[14:29] &lt;+Aknor&gt; like i asked, for what reasons exactly do you think the MM needs to check things like skills and some ship attributes?
[14:29] &lt;+Luck&gt; and gunnery skills
[14:30] &lt;+Aknor&gt; to determine what exactly?
[14:30] &lt;+Luck&gt; because it seems weird
[14:30] &lt;+Aknor&gt; whether they can even be fitted?
[14:30] &lt;+Luck&gt; to split up the fit checks
[14:30] &lt;+Luck&gt; between the mm and the modules themselves
[14:30] &lt;+Luck&gt; yes
[14:30] &lt;+Luck&gt; because otherwise you have a situation where you have the pg and cpu to fit it
[14:30] &lt;+Luck&gt; so the module manager fits it
[14:30] &lt;+Luck&gt; then the module says NOPE from the skils
[14:30] &lt;+Luck&gt; so it unfits it
[14:30] &lt;+Aknor&gt; hmmm
[14:31] &lt;+Luck&gt; it seems odd to me to split up the checks
[14:31] &lt;+Luck&gt; mm does checks
[14:31] &lt;+Luck&gt; modules do effects
[14:31] &lt;+Luck&gt; makes more sense to me
[14:31] &lt;+Aknor&gt; but you know that it requires knowledge of specific needs and requirements of modules to be embedded in the MM itself
[14:31] &lt;+Luck&gt; if you have a ShipRef you already have all of that
[14:31] &lt;+Aknor&gt; so each time we add a module group, you gotta add more specific knowlege of how that module is used to the MM
[14:31] &lt;+Luck&gt; you need a ShipRef and a ClientRef
[14:32] &lt;+Luck&gt; ShipRef gives you ModuleRef which gives you it's attributes
[14:32] &lt;+Luck&gt; you need the ShipRef for the cpu and pg
[14:32] &lt;+Luck&gt; so you already have a ptr to the modules
[14:33] &lt;+Aknor&gt; right
[14:34] &lt;+Luck&gt; idk does that make sense?
[14:34] &lt;+Aknor&gt; but you see what i mean about specific knowledge of modules having to be in the MM?
[14:34] &lt;+Aknor&gt; if we had a ValidateOnline() function for each module
[14:34] &lt;+Aknor&gt; that could do all the checks
[14:34] &lt;+Luck&gt; so pg/cpu/skills
[14:34] &lt;+Luck&gt; all inside the module
[14:35] &lt;+Aknor&gt; because each module knows what skills, ship attributes, etc are required to fit/online/overload/ etc
[14:35] &lt;+Aknor&gt; sounds crazy i know
[14:35] &lt;+Luck&gt; yea
[14:35] &lt;+Luck&gt; lol
[14:35] &lt;+Luck&gt; no it doesn't
[14:35] &lt;+Aknor&gt; well, otherwise, i think the MM becomes some super class
[14:35] &lt;+Luck&gt; so what your suggesting is that the module manaager really is only an barebones interface
[14:35] &lt;+Aknor&gt; hehehehe, almost like the modules manage themselves, eh?
[14:36] &lt;+Luck&gt; between the ship modules and the client class
[14:36] &lt;+Luck&gt; lol
[14:36] &lt;+Aknor&gt; HA, but not really
[14:36] &lt;+Luck&gt; yea
[14:36] &lt;+Luck&gt; no that makes sense
[14:36] &lt;+Luck&gt; okay
[14:36] &lt;+Luck&gt; im with you on this
[14:36] &lt;+Luck&gt; that makes sense
[14:36] &lt;+Aknor&gt; well, the MM would still take the results of the ValidateXXX() calls and make decisions
[14:36] &lt;+Luck&gt; yea
[14:37] &lt;+Luck&gt; kk
[14:37] &lt;+Aknor&gt; it would take the modified externalAction class object that has the overload info, target effect info, whatever, and act on that
[14:37] &lt;+Luck&gt; yea
[14:38] &lt;+Aknor&gt; ok, well i gotta go.. this was good discussion.... hope ya dont think i'm trying to take over around here &gt;_&gt;
[14:38] &lt;+Luck&gt; lol
[14:38] &lt;+Luck&gt; i don't
[14:38] &lt;+Luck&gt; and even if you were
[14:38] &lt;+Luck&gt; i'd be more happy that things were getting done
[14:38] &lt;+Aknor&gt; LOL
[14:39] &lt;+Aknor&gt; well, so just think about this stuff i proposed some more.. see if it makes sense and in the meantime i'll start working on the Ship class, adding the std::map containers, the GetModule(flag) function, FitModule(moduleID), UnfitModule(moduleID), same for rigs and subsystems
[14:40] &lt;+Aknor&gt; by then we'll have had more discussion and brainstorming
[14:40] &lt;+Luck&gt; lol
[14:40] &lt;+Luck&gt; sounds good
[14:40] &lt;+Aknor&gt; ok, cool
[14:41] &lt;+Aknor&gt; as you most likely know way more than i do about the packets for all this module stuff (i know zilch), maybe you could handle that stuff?
[14:41] &lt;+Aknor&gt; and then i'm sure as we're integrating this stuff and actually trying to use it, i'll be examining the packets myself and learning how that part of it works
[14:41] &lt;+Luck&gt; yea
[14:41] &lt;+Luck&gt; there aren't that many we have to worry about
[14:42] &lt;+Luck&gt; most of the packets are for graphics stuff
[14:42] &lt;+Aknor&gt; for instance, how does the client handle packets for grouped modules?
[14:42] &lt;+Luck&gt; well that I haven't looked at yet
[14:42] &lt;+Aknor&gt; one packet sent if you activate the group?
[14:42] &lt;+Luck&gt; since i never had any info on it
[14:42] &lt;+Aknor&gt; haha
[14:42] &lt;+Aknor&gt; so, the MM might need to retain some info about module 'groups'
[14:42] &lt;+Luck&gt; possibly
[14:42] &lt;+Aknor&gt; then inside the MM, it makes the iterative calls to all the modules in that group
[14:43] &lt;+Aknor&gt; unless the client just sends rapid-fire activate packets for all modules in the group, OR it attaches all the itemIDs of the modules in the group inside the activate packet
[14:43] &lt;+Aknor&gt; bah... we'll figure it out
[14:43] &lt;+Luck&gt; yea
[14:43] &lt;+Aknor&gt; anyway. got to go, so i'll talk to you later dude
[14:43] &lt;+Luck&gt; it could just expand the tuple
[14:43] &lt;+Luck&gt; k
[14:44] &lt;+Aknor&gt; yeah
[14:44] &lt;+Luck&gt; ttyl man
[14:44] &lt;+Aknor&gt; ok
[14:44] -&gt;&gt; You are now known as Aknor|afk
</pre>
<p><br />
</p>
<h1> <span class="mw-headline" id="PART_III"> PART III </span></h1>
<pre>[00:15] &lt;+oza&gt; hey hey Luck
[00:15] &lt;@Luck&gt; hey
[00:15] &lt;@Luck&gt; what's up
[00:15] &lt;+oza&gt; just been logging with aknor
[00:15] &lt;+Aknor&gt; hey
[00:15] &lt;@Luck&gt; hey
[00:15] &lt;+Aknor&gt; logging buy/sell orders
[00:15] &lt;+oza&gt; apart from that tring to get a stupid local vm fixed
[00:16] &lt;@Luck&gt; lol
[00:16] &lt;@Luck&gt; less log more code&#160;:p
[00:16] &lt;@Luck&gt; jk
[00:16] &lt;+oza&gt; lol
[00:16] &lt;+oza&gt; less chat more code
[00:16] &lt;@Luck&gt; lol
[00:16] * oza whips luck
[00:16] &lt;@Luck&gt;&#160;:(
[00:16] &lt;+oza&gt;&#160;:P
[00:16] &lt;@Luck&gt; lol
[00:17] &lt;@Luck&gt; aknor any progress on the ship modules?
[00:17] &lt;+Aknor&gt; nah
[00:17] &lt;@Luck&gt; lol
[00:17] &lt;+Aknor&gt; haven't worked on them at all
[00:17] &lt;@Luck&gt; ...
[00:17] &lt;+Aknor&gt; today was mother's day so was away all day
[00:17] &lt;@Luck&gt; ah
[00:17] &lt;+Aknor&gt; yesterday had stuff to do
[00:17] &lt;@Luck&gt; i understand being busy&#160;:p
[00:18] &lt;+Aknor&gt; i'll be doing some writing of that stuff soon&#160;:)
[00:18] &lt;+Aknor&gt; you waiting on them?
[00:18] &lt;@Luck&gt; well
[00:18] &lt;@Luck&gt; somewhat
[00:18] &lt;+Aknor&gt; hahah
[00:18] &lt;@Luck&gt; i want to see what your base class looks like
[00:18] &lt;+Aknor&gt; ah
[00:18] &lt;@Luck&gt; so i can A) derive more of the 138
[00:18] &lt;+Aknor&gt; ooooo
[00:18] &lt;@Luck&gt; and B) work on the mm
[00:18] &lt;+Aknor&gt; ok
[00:19] &lt;+oza&gt; 138?
[00:19] &lt;@Luck&gt; 138 module types
[00:19] &lt;+Aknor&gt; LOL
[00:19] &lt;+Aknor&gt; not types, groups
[00:19] &lt;+oza&gt; 0.0
[00:19] &lt;@Luck&gt; well
[00:19] &lt;@Luck&gt; yea
[00:19] &lt;@Luck&gt; oh
[00:19] &lt;@Luck&gt; and
[00:19] &lt;@Luck&gt; one more thing that's gonna make our life a little bit more of a pain in the ass
[00:19] &lt;+Aknor&gt; \o/
[00:19] &lt;+oza&gt; WAIT FOR IT
[00:19] &lt;@Luck&gt; we may have to include a gfx function in the derived classes
[00:19] &lt;@Luck&gt; as some of them are different
[00:19] &lt;@Luck&gt; *very different
[00:19] &lt;+Aknor&gt; what does that do?
[00:19] &lt;@Luck&gt; to send the correct graphics packets
[00:20] &lt;+Aknor&gt; send a gfx packet to the client(s)&#160;?
[00:20] &lt;@Luck&gt; tell it what type of graphics to display
[00:20] &lt;+oza&gt; wouldn't it jsut be an id
[00:20] &lt;+Aknor&gt; ok
[00:20] &lt;@Luck&gt; for something like turrets yes
[00:20] &lt;@Luck&gt; but it may get a little screwy with boosters and shields and such
[00:20] &lt;+Aknor&gt; only active modules have that gfx function yeah?
[00:20] &lt;@Luck&gt; yes
[00:20] &lt;@Luck&gt; and they don't vary much between the major types of modules
[00:21] &lt;+Aknor&gt; ok, so that would be virtual void SendGraphicsPacket() = 0;
[00:21] &lt;+Aknor&gt; in the ActiveModules class
[00:21] &lt;@Luck&gt; something like that yea
[00:21] &lt;+Aknor&gt; then all of the active modules inherit it and then have to implement it on their own
[00:21] &lt;@Luck&gt; yea
[00:21] &lt;+Aknor&gt; and that would just use one of the Client send packet functions?
[00:21] &lt;@Luck&gt; yep
[00:21] &lt;+Aknor&gt; ok, so we could do this one of two ways
[00:22] &lt;@Luck&gt; you just create the packet, encode it and send it on it's way
[00:22] &lt;+Aknor&gt; one, we have this separate SendGraphicsPacket() function in EACH module class
[00:22] &lt;+Aknor&gt; OR, the MM does every one of them
[00:22] &lt;@Luck&gt; i was just about to suggest that
[00:22] &lt;+Aknor&gt; but, i gotta ask, it's module specific info that goes in there?
[00:22] &lt;@Luck&gt; what I did before was write a really general one that took a buch of input from the particular module
[00:22] &lt;@Luck&gt; umm
[00:22] &lt;@Luck&gt; more like group specific
[00:23] &lt;+Aknor&gt; ok
[00:23] &lt;+Aknor&gt; fair enough
[00:23] &lt;@Luck&gt; like laser turrets do laser effects
[00:23] &lt;@Luck&gt; etc
[00:23] &lt;@Luck&gt; h/o one second
[00:23] * Luck searches for table
[00:23] &lt;+Aknor&gt; remember that "externalAction" class thingy i suggested that we would create in the MM then pass into the module functions Activate/Online/etc that the module class would modify?
[00:23] &lt;+Aknor&gt; we could just put the packet to be sent in there
[00:24] &lt;@Luck&gt; yea
[00:24] &lt;@Luck&gt; that could work
[00:24] &lt;+Aknor&gt; then the MM would just use some CheckForGFXPacketToSend()... returns boolean
[00:24] &lt;+Aknor&gt; then sends the packet because the MM has access to Client object, module classes do not
[00:24] &lt;+Aknor&gt; so, we get best of both worlds
[00:24] &lt;@Luck&gt; yea
[00:24] &lt;@Luck&gt; or
[00:24] &lt;@Luck&gt; wait
[00:24] &lt;+Aknor&gt; module classes make the packet and send it up to MM
[00:24] &lt;@Luck&gt; lol
[00:24] &lt;@Luck&gt; nvm
[00:25] &lt;+Aknor&gt; then MM sends it out using Client object reference
[00:25] &lt;@Luck&gt; yea
[00:25] &lt;+Aknor&gt; but there's something else here
[00:25] &lt;+Aknor&gt; it's not just the client who owns that module that gets these packets right?
[00:25] &lt;@Luck&gt; the client doesn't own the module...
[00:25] &lt;@Luck&gt; im not sure i understand what you mean
[00:26] &lt;+Aknor&gt; ok, ok... i mean the client that owns the ship that owns the module being activated or whatever
[00:26] &lt;+oza&gt; wow what a headfuck
[00:26] &lt;@Luck&gt; lol
[00:26] &lt;@Luck&gt;&#160;:p
[00:26] &lt;+Aknor&gt; player X activates module Y, right?
[00:26] &lt;@Luck&gt; yes
[00:26] &lt;+Aknor&gt; MM calles Activate() for module X
[00:26] &lt;+Aknor&gt; MM then sees a GFX packet goes out
[00:26] &lt;+oza&gt; module Y*
[00:26] &lt;@Luck&gt;&#160;:)
[00:27] &lt;@Luck&gt; yes
[00:27] &lt;+Aknor&gt; but player X is in a bubble with players A, B, and C
[00:27] &lt;+Aknor&gt; don't all players A, B, C, and X get that gfx packet?
[00:27] &lt;@Luck&gt; h/o
[00:27] &lt;+Aknor&gt; ok
[00:27] &lt;+oza&gt; log and u shall see
[00:27] &lt;+Aknor&gt; i know, i know
[00:27] &lt;+oza&gt;&#160;:P
[00:27] &lt;+Aknor&gt; haven't gottn there yet&#160;;)
[00:28] &lt;@Luck&gt; i had it working in the old one, just checking the source
[00:28] &lt;@Luck&gt; trac seems to be very slow
[00:29] &lt;+Aknor&gt; i assumed all clients in the "bubble" need to receive the gfx packet for just one ship activating a module that had an external effect like an armor repairer, so that all clients would "see" the gfx effect
[00:29] &lt;+oza&gt; you would think so
[00:29] &lt;+oza&gt; or they wouldn't get all effects
[00:29] &lt;+Aknor&gt; so, it needs some kind of multicast, but this might already be handled through the bubblemanager
[00:30] &lt;@Luck&gt; yea
[00:30] &lt;@Luck&gt; i only remember sending a destiny update packet
[00:30] &lt;@Luck&gt; and i believe that the destiny manager handled it internally
[00:30] &lt;+Aknor&gt; ok, so maybe that is already handling sending the packet to all clients in the bubble and the MM does not need to know HOW to do that
[00:30] &lt;@Luck&gt; i don't believe it does
[00:30] &lt;@Luck&gt; and in any case
[00:30] &lt;@Luck&gt; it shouldn't
[00:30] &lt;+Aknor&gt; it just tells the bubblemanager or whatever class does it, then it gets done
[00:30] &lt;+Aknor&gt; which is what makes sense
[00:30] &lt;@Luck&gt; that should be handled elsewhere
[00:31] &lt;@Luck&gt; yea
[00:31] &lt;+Aknor&gt; right, encapsulated elsewhere
[00:35] &lt;@Luck&gt; ah
[00:35] &lt;@Luck&gt; okay
[00:35] &lt;@Luck&gt; found it
[00:35] &lt;@Luck&gt; in dgmeffects
[00:35] &lt;@Luck&gt; the guid column
[00:35] &lt;@Luck&gt; effects.whatever
[00:35] &lt;@Luck&gt; that's basically what is unique about what is sent
[00:35] &lt;@Luck&gt; most of the time at least
[00:36] &lt;@Luck&gt; except effects.Laser doesn't work
[00:36] &lt;@Luck&gt; idk why&#160;:(
[00:39] &lt;+Aknor&gt; huh, weird
[00:39] &lt;+oza&gt; does that send it to all clients?
[00:41] &lt;@Luck&gt; does what send it to all clients?
[00:41] &lt;+oza&gt; the effects
[00:41] &lt;+oza&gt; dgmeffects
[00:42] &lt;+oza&gt; or are you jsut sayign thats where the id for it is
[00:42] &lt;@Luck&gt; that's where the info is
[00:42] &lt;+oza&gt; k
[00:45] &lt;+Aknor&gt; so, luck, do you think that makes sense?  have the module classes encode the gfx packet then attach it to that externalAction class instance passed into the module functions?
[00:46] &lt;+Aknor&gt; then the MM takes that packet, when present, and sends it out?
[00:46] &lt;@Luck&gt; yea
[00:46] &lt;+Aknor&gt; ok
[00:46] &lt;@Luck&gt; should be relatively simple
[00:47] &lt;+Aknor&gt; i haven't thought of all that would go into this externalAction class, but since it's a class object, we can add to it later without breaking what's already there
[00:47] &lt;@Luck&gt; the mm just does client-&gt;send(m_shipRef-&gt;GetModule(flag)-&gt;encodeGFXPacket()) or w/e
[00:47] &lt;+Aknor&gt; yeah, kinda
[00:47] &lt;@Luck&gt; i guess that's not really how i'd work if your wrapping all that up in a different class
[00:48] &lt;@Luck&gt; i'm kind of thinking of it as a function inside the mm kind of way
[00:48] &lt;+Aknor&gt; my idea was we make this ModuleAction class, that holds things like overload info on what slots get damaged due to overload and how much, this gfx packet, whatever else we need
[00:48] &lt;@Luck&gt; which isn't necessarily the way it should be done
[00:48] &lt;@Luck&gt; yea
[00:48] &lt;+Aknor&gt; kind of a way for the modules to "tell" the MM what needs to happen now that the module has been Onlined or Activated or Overloaded or the reverse
[00:48] &lt;@Luck&gt; i feel like that should be owned by the mm
[00:48] &lt;+Aknor&gt; yes
[00:49] &lt;@Luck&gt; kk
[00:49] &lt;+Aknor&gt; so, when dogmaIMBound calls ModuleManager-&gt;Activate(moduleID)
[00:49] &lt;+Aknor&gt; inside there, the MM makes a new instance of the ModuleAction class, and passes it into the module's Activate or w/e
[00:49] &lt;+Aknor&gt; then the Module class modifies that instance
[00:50] &lt;+Aknor&gt; and when the execution returns to the MM, it checks the instance of the ModuleAction class object for what's new/changed
[00:50] &lt;+Aknor&gt; and takes action on it, whether it's sending out the gfx packet or applying overload damage to adjacent slots' modules
[00:50] &lt;@Luck&gt; yea
[00:50] &lt;@Luck&gt; everytime i think about handling overload damage my head hurts
[00:51] &lt;+Aknor&gt; LOL
[00:52] &lt;+Aknor&gt; when we make this design functional, the design itself should make it rather easy since the modules themselves will calculate heat damage
[00:52] &lt;@Luck&gt; i hope so
[00:52] &lt;+Aknor&gt; then the MM can take that from the modified ModuleAction class object passed into the module class and apply the damage to adjacent modules according to those formulas you mentioned
[00:53] &lt;+Aknor&gt; where have you seen those formulas for overload damage?
[00:53] &lt;@Luck&gt; im looking for the forum post right now
[00:53] &lt;@Luck&gt; but you can read this while i search if you want
[00:53] &lt;+Aknor&gt; you know, again, overload stuff is another thing that EFT does
[00:53] &lt;+Aknor&gt; ok
[00:53] &lt;@Luck&gt; it goes over it from a higher level point of view
[00:53] &lt;@Luck&gt; yea that's true
[00:53] &lt;+Aknor&gt; im gonna head to bed soon, so...
[00:53] &lt;@Luck&gt; <a rel="nofollow" class="external free" href="http://wiki.eveonline.com/en/wiki/Heat_(Game_mechanic)">http://wiki.eveonline.com/en/wiki/Heat_(Game_mechanic)</a>
[00:53] &lt;+Aknor&gt; ah
[00:54] &lt;+Aknor&gt; figured it be on evelopedia
[00:54] &lt;@Luck&gt; i love this
[00:54] &lt;@Luck&gt; i makes me want to kill the ccp devs
[00:54] &lt;@Luck&gt; Offline modules and empty module slots function as heat sinks, reducing the heat damage taken over time both locally (nearby overloaded module(s) on same rack) and globally (whole ship). Hence such heat dispersion slots will give you middle-term overload as trade-off.
[00:55] &lt;+Aknor&gt; makes sense
[00:55] &lt;@Luck&gt; yea
[00:55] &lt;+Aknor&gt; just not easy to simulate
[00:55] &lt;@Luck&gt; but it's a pain in the ass
[00:55] &lt;@Luck&gt; lol
[00:55] &lt;+Aknor&gt; but again, the module itself knows how much heat will be generated when overloaded, so it just returns that in the ModuleAction class
[00:56] &lt;+Aknor&gt; then the MM is responsible for checking adjacent module slots and assigning or sinking heat damage
[00:57] &lt;@Luck&gt; yea
[00:57] &lt;@Luck&gt; the more we talk about it the less of a pain it seems
[00:57] &lt;@Luck&gt; but it's still a pain&#160;:p
[00:58] &lt;+oza&gt; everything is still a pain
[01:01] &lt;@Luck&gt; okay
[01:01] &lt;@Luck&gt; so no one knows the exact formula
[01:01] &lt;@Luck&gt; afaik
[01:01] &lt;+oza&gt; which one?
[01:02] &lt;@Luck&gt; for overload damage
[01:03] &lt;@Luck&gt; im gonna write up what I know on overheating in the wiki
[01:03] &lt;@Luck&gt; so we can attempt to put together a formula
[01:03] * Luck hopes he still has wiki access
[01:03] &lt;+Aknor&gt; Luck, it's in EFT... has to be
[01:03] &lt;+Aknor&gt; LOL
[01:03] &lt;@Luck&gt; it is in eft
[01:03] &lt;+Aknor&gt; i just hate VB, LOL
[01:03] &lt;+Aknor&gt; but i can read it
[01:04] &lt;@Luck&gt; but all the people on the eve forums, including the mods say not to put much stock in his formula for that because the math is unkown
[01:04] &lt;@Luck&gt; that his overload formulas are just his best guess
[01:04] &lt;+oza&gt; why doesn't ccp release the formulas then
[01:04] &lt;@Luck&gt; because they're weird about that
[01:04] &lt;@Luck&gt; they don't release many formulas at all
[01:04] &lt;@Luck&gt; most are figured out by the community
[01:04] &lt;@Luck&gt; with a shitload of data points and excel&#160;:p
[01:05] &lt;+oza&gt; if u log enough packets you could come up with soemthign close&#160;?
[01:05] &lt;+oza&gt; or still not close enough
[01:05] &lt;@Luck&gt; logging the packets is probably overkill
[01:05] &lt;@Luck&gt; we just need somone to spend a bunch of time breaking items with overloading and recording the time it takes to break them
[01:05] &lt;@Luck&gt; and the specific configuration
[01:06] &lt;@Luck&gt; and how different configurations affect the time
[01:06] &lt;@Luck&gt; etc
[01:06] &lt;+oza&gt;&#160;:S
[01:06] &lt;+oza&gt; where is hur&#160;:P
[01:06] &lt;+oza&gt; give him something to do
[01:06] &lt;+oza&gt; hehe
[01:06] &lt;@Luck&gt;&#160;:p
</pre>
<!-- 
NewPP limit report
Preprocessor node count: 11/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key evemu_wiki-pubwiki_:pcache:idhash:60-0!*!*!!*!*!* and timestamp 20150804155841 -->
</div>				<!-- /bodycontent -->
								<!-- printfooter -->
				<div class="printfooter">
				Retrieved from "<a href="http://wiki.evemu.org/index.php?title=ModuleManager_Conversations_with_Luck&amp;oldid=116">http://wiki.evemu.org/index.php?title=ModuleManager_Conversations_with_Luck&amp;oldid=116</a>"				</div>
				<!-- /printfooter -->
												<!-- catlinks -->
				<div id='catlinks' class='catlinks catlinks-allhidden'></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
				<!-- debughtml -->
								<!-- /debughtml -->
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="mw-head" class="noprint">
			
<!-- 0 -->
<div id="p-personal" class="">
	<h5>Personal tools</h5>
	<ul>
		<li id="pt-anonuserpage"><a href="User_86.57.144.html" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">86.57.144.126</a></li>
		<li id="pt-anontalk"><a href="User_talk_86.57.144.html" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li>
		<li id="pt-anonlogin"><a href="http://wiki.evemu.org/index.php?title=Special:UserLogin&amp;returnto=ModuleManager+Conversations+with+Luck" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
	</ul>
</div>

<!-- /0 -->
			<div id="left-navigation">
				
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
	<h5>Namespaces</h5>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="ModuleManager_Conversations_with_Luck.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://wiki.evemu.org/index.php?title=Talk:ModuleManager_Conversations_with_Luck&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
	<h4>
		</h4>
	<h5><span>Variants</span><a href="#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
			</div>
			<div id="right-navigation">
				
<!-- 0 -->
<div id="p-views" class="vectorTabs">
	<h5>Views</h5>
	<ul>
					<li id="ca-view" class="selected"><span><a href="ModuleManager_Conversations_with_Luck.html" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="http://wiki.evemu.org/index.php?title=ModuleManager_Conversations_with_Luck&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.evemu.org/index.php?title=ModuleManager_Conversations_with_Luck&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" class="vectorMenu emptyPortlet">
	<h5><span>Actions</span><a href="#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search">
	<h5><label for="searchInput">Search</label></h5>
	<form action="http://wiki.evemu.org/index.php" id="searchform">
				<div>
			<input type="search" name="search" title="Search EVEmu Wiki [f]" accesskey="f" id="searchInput" />			<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />			<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />					<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>

<!-- /2 -->
			</div>
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="mw-panel" class="noprint">
				<!-- logo -->
					<div id="p-logo"><a style="background-image: url(../skins/evemu/images/evemu2.png);" href="Main_Page.html"  title="Visit the main page"></a></div>
				<!-- /logo -->
				
<!-- SEARCH -->

<!-- /SEARCH -->

<!-- EVEmu Wiki -->
<div class="portal" id='p-EVEmu_Wiki'>
	<h5>EVEmu Wiki</h5>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-Connect"><a href="EVEmu_Connect.html">Connect</a></li>
			<li id="n-Templates"><a href="Category_Templates.html">Templates</a></li>
			<li id="n-currentevents"><a href="EVEmu_Wiki_Current_events.html" title="Find background information on current events">Current events</a></li>
			<li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="EVE_Protocol.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="Help_Contents.html" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>

<!-- /EVEmu Wiki -->

<!-- EVEmu Sites -->
<div class="portal" id='p-EVEmu_Sites'>
	<h5>EVEmu Sites</h5>
	<div class="body">
		<ul>
			<li id="n-Forums"><a href="http://forum.evemu.org/" rel="nofollow">Forums</a></li>
			<li id="n-Source-Code-.28Github.29"><a href="https://github.com/evemuproject" rel="nofollow">Source Code (Github)</a></li>
			<li id="n-Pastebin"><a href="http://www.levelbelow.net/pastebin" rel="nofollow">Pastebin</a></li>
			<li id="n-Trac-.28old.29"><a href="http://trac.evemu.org/" rel="nofollow">Trac (old)</a></li>
		</ul>
	</div>
</div>

<!-- /EVEmu Sites -->

<!-- TOOLBOX -->
<div class="portal" id='p-tb'>
	<h5>Toolbox</h5>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/ModuleManager_Conversations_with_Luck.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/ModuleManager_Conversations_with_Luck.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li><a href="http://wiki.evemu.org/index.php?title=ModuleManager_Conversations_with_Luck&amp;printable=yes" rel="alternate">Printable version</a></li>
			<li id="t-permalink"><a href="http://wiki.evemu.org/index.php?title=ModuleManager_Conversations_with_Luck&amp;oldid=116" title="Permanent link to this revision of the page">Permanent link</a></li>
		</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
		<!-- /panel -->
		<!-- footer -->
		<div id="footer">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 29 July 2012, at 05:44.</li>
											<li id="footer-info-viewcount">This page has been accessed 747 times.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a>.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="EVEmu_Wiki_Privacy_policy.html" title="EVEmu Wiki:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="EVEmu_Wiki_About.html" title="EVEmu Wiki:About">About EVEmu Wiki</a></li>
											<li id="footer-places-disclaimer"><a href="EVEmu_Wiki_General_disclaimer.html" title="EVEmu Wiki:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://www.gnu.org/copyleft/fdl.html"><img src="../skins/common/images/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" /></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		<script src="http://wiki.evemu.org/load.php?debug=false&amp;lang=en&amp;modules=skins.vector&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.user","mediawiki.page.ready","ext.vector.collapsibleNav","ext.vector.collapsibleTabs","ext.vector.simpleSearch"], null, true);
}</script>
<!-- Served in 0.379 secs. -->
	</body>

<!-- Mirrored from wiki.evemu.org/index.php/ModuleManager_Conversations_with_Luck by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 04 Aug 2015 15:59:11 GMT -->
</html>
